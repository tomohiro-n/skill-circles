/// <reference path="../../../typings/tsd.d.ts" />
var skillCircles;!function(t){"use strict";var e=function(){function t(){this.diameter=960,this.mainChart=d3.select("#main-chart")}return t.prototype.drawCircles=function(t){var e=this;t?this._draw(t):d3.json("assets/json/data.json",function(t,a){e._draw(a)})},t.prototype._draw=function(e){var a=this,r=d3.layout.pack().size([this.diameter-4,this.diameter-4-2*t.pathStrOffset]).value(function(t){return t.size});this.mainChart.selectAll("svg").remove();var n=this.mainChart.append("svg").attr("viewBox","0 0 "+this.diameter+" "+this.diameter).attr("preserveAspectRatio","xMinYMin meet").append("g").attr("transform","translate(2,2)");n.append("text").attr("x",this.diameter/2).attr("y",t.pathStrOffset).attr("text-anchor","middle").style("font-size","25px").on("click",function(){a.drawCircles()}).text(e.name);var i=n.datum(e).selectAll(".node  ").data(r.nodes).enter().append("g").attr("class",function(t){return t.children?"node":"leaf node"}).attr("transform",function(e){return"translate("+e.x+","+(e.y+2*t.pathStrOffset)+")"});i.append("title").text(function(e){return e.name+(e.children?"":": "+t.format(e.size))}),i.append("circle").attr("r",function(t){return t.r}),i.on("click",function(t){a._draw(t)}),i.filter(function(t){return!t.children}).append("text").attr("dy",".3em").style("text-anchor","middle").text(function(t){return t.name.substring(0,t.r/3)}),d3.select(self.frameElement).style("height",this.diameter+"px")},t.format=d3.format(",d"),t.pathStrOffset=20,t}();t.D3Service=e}(skillCircles||(skillCircles={}));var skillCircles;!function(t){"use strict";var e=function(){function t(t,e){e.drawCircles()}return t.$inject=["$scope","d3Service"],t}();t.MainCtrl=e}(skillCircles||(skillCircles={}));var skillCircles;!function(t){"use strict";var e=function(){function t(t){t.date=new Date}return t.$inject=["$scope"],t}();t.NavbarCtrl=e}(skillCircles||(skillCircles={}));var skillCircles;!function(t){"use strict";angular.module("skillCircles",["ngResource","ngRoute","ui.bootstrap"]).service("d3Service",t.D3Service).controller("MainCtrl",t.MainCtrl).controller("NavbarCtrl",t.NavbarCtrl).config(["$locationProvider",function(t){t.html5Mode(!0)}]).config(["$routeProvider",function(t){t.when("/",{templateUrl:"app/main/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}(skillCircles||(skillCircles={})),angular.module("skillCircles").run(["$templateCache",function(t){t.put("app/main/main.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div id="main-chart" class="svg-container"></div><hr><div class="footer"></div></div>'),t.put("components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home"></span> Skill Circles</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></div></nav>')}]);
